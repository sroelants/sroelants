var animationElements,breakMinutes,breakSlider,clockDiv,clockFace,clockState,fireButton,i,len,padWithZeros,rainButton,redrawClock,redrawColors,redrawSliders,redrawSound,resetAnimation,resetButton,setAnimationTime,sliderState,sound,soundState,sounds,startButton,startClock,update,updateClock,volumeButton,volumeSlider,windButton,workMinutes,workSlider;for(startButton=document.getElementById("start"),resetButton=document.getElementById("reset"),clockDiv=document.getElementById("time"),workSlider=document.getElementById("workslider"),breakSlider=document.getElementById("breakslider"),workMinutes=document.getElementById("workminutes"),breakMinutes=document.getElementById("breakminutes"),clockFace=document.getElementById("clock-face"),rainButton=document.getElementById("rain"),fireButton=document.getElementById("fire"),windButton=document.getElementById("wind"),volumeButton=document.getElementById("volume"),volumeSlider=document.getElementById("volumeslider"),animationElements=Array.from(document.getElementsByClassName("clock-animation")),sounds=[new Audio("assets/rain.mp3"),new Audio("assets/fire.mp3"),new Audio("assets/wind.mp3")],i=0,len=sounds.length;i<len;i++)sound=sounds[i],sound.loop=!0;clockState={time:1500,running:!1,work:!0,reset:!0},sliderState={work:25,break:5},soundState={volume:80,rain:!1,fire:!1,wind:!1},update=function(t,e,n){var r;return r=t,r[e]=n,r},updateClock=function(t,e,n){var r;return r=t,r[e]=n,r},redrawClock=function(t,e){var n,r,i,a,o;if(t.running!==e.running)if(e.running)for(startButton.children[0].classList.remove("fa-play"),startButton.children[0].classList.add("fa-pause"),r=0,a=animationElements.length;r<a;r++)n=animationElements[r],n.classList.remove("pause");else for(startButton.children[0].classList.add("fa-play"),startButton.children[0].classList.remove("fa-pause"),i=0,o=animationElements.length;i<o;i++)n=animationElements[i],n.classList.add("pause");if(t.time!==e.time&&(clockDiv.innerHTML=padWithZeros(Math.floor(e.time/60).toString()+":"+padWithZeros((e.time%60).toString()))),t.work!==e.work)return e.work?(clockDiv.classList.add("work"),clockDiv.classList.remove("break")):(clockDiv.classList.remove("work"),clockDiv.classList.add("break"))},redrawSliders=function(t,e){if(t.work!==e.work&&(workMinutes.innerHTML=e.work),t.break!==e.break)return breakMinutes.innerHTML=e.break},redrawSound=function(t,e){var n,r,i,a,o,s,d,u;if(t.volume!==e.volume)for(n=0,a=sounds.length;n<a;n++)sound=sounds[n],sound.volume=e.volume/100;if(t.rain!==e.rain&&(e.rain?(rainButton.classList.add("active"),sounds[0].play()):(rainButton.classList.remove("active"),sounds[0].pause())),t.fire!==e.fire&&(e.fire?(fireButton.classList.add("active"),sounds[1].play()):(fireButton.classList.remove("active"),sounds[1].pause())),t.wind!==e.wind&&(e.wind?(windButton.classList.add("active"),sounds[2].play()):(windButton.classList.remove("active"),sounds[2].pause())),t.mute!==e.mute){if(e.mute){for(volumeButton.children[0].classList.remove("fa-volume-up"),volumeButton.children[0].classList.add("fa-volume-off"),volumeSlider.classList.add("disabled"),volumeSlider.disabled=!0,d=[],r=0,o=sounds.length;r<o;r++)sound=sounds[r],d.push(sound.muted=!0);return d}for(volumeButton.children[0].classList.add("fa-volume-up"),volumeButton.children[0].classList.remove("fa-volume-off"),volumeSlider.classList.remove("disabled"),volumeSlider.disabled=!1,u=[],i=0,s=sounds.length;i<s;i++)sound=sounds[i],u.push(sound.muted=!1);return u}},redrawColors=function(t,e){var n,r,i,a,o,s;for(r=0,a=coloredElements.length;r<a;r++)n=coloredElements[r],n.classList.remove(t);for(s=[],i=0,o=coloredElements.length;i<o;i++)n=coloredElements[i],s.push(n.classList.add(e));return s},startButton.addEventListener("click",function(){var t;return t=JSON.parse(JSON.stringify(clockState)),clockState=update(clockState,"running",!t.running),redrawClock(t,clockState),clockState.running?(clockState.iv=startClock(),clockState.reset?(clockState.reset=!1,resetAnimation(),setAnimationTime(clockState.time)):void 0):clearInterval(clockState.iv)}),resetButton.addEventListener("click",function(){var t;return t=JSON.parse(JSON.stringify(clockState)),clockState=update(update(update(clockState,"time",60*sliderState.work),"running",!1),"work",!0),redrawClock(t,clockState),setAnimationTime(clockState.time),resetAnimation(),clearInterval(clockState.iv)}),workSlider.addEventListener("input",function(t){var e,n;if(n=JSON.parse(JSON.stringify(sliderState)),sliderState=update(sliderState,"work",t.target.value),redrawSliders(n,sliderState),!clockState.running)return e=JSON.parse(JSON.stringify(clockState)),clockState=update(clockState,"time",60*sliderState.work),redrawClock(e,clockState),clockState.reset=!0}),breakSlider.addEventListener("input",function(t){var e;return e=JSON.parse(JSON.stringify(sliderState)),sliderState=update(sliderState,"break",t.target.value),redrawSliders(e,sliderState)}),rainButton.addEventListener("click",function(){var t;return t=JSON.parse(JSON.stringify(soundState)),soundState=update(soundState,"rain",!t.rain),redrawSound(t,soundState)}),fireButton.addEventListener("click",function(){var t;return t=JSON.parse(JSON.stringify(soundState)),soundState=update(soundState,"fire",!t.fire),redrawSound(t,soundState)}),windButton.addEventListener("click",function(){var t;return t=JSON.parse(JSON.stringify(soundState)),soundState=update(soundState,"wind",!t.wind),redrawSound(t,soundState)}),volumeButton.addEventListener("click",function(){var t;return t=JSON.parse(JSON.stringify(soundState)),soundState=update(soundState,"mute",!t.mute),redrawSound(t,soundState)}),volumeSlider.addEventListener("input",function(t){var e;return e=JSON.parse(JSON.stringify(soundState)),soundState=update(soundState,"volume",t.target.value),redrawSound(e,soundState)}),padWithZeros=function(t){return t.length>1?t:"0"+t},startClock=function(){var t;return t=setInterval(function(){var t;return clockState.time>=1?(t=JSON.parse(JSON.stringify(clockState)),clockState=update(clockState,"time",t.time-1),redrawClock(t,clockState)):clockState.time<=1&&clockState.work?(t=JSON.parse(JSON.stringify(clockState)),clockState=update(update(clockState,"time",60*sliderState.break),"work",!1),setAnimationTime(clockState.time),resetAnimation(),redrawClock(t,clockState)):void 0},950)},resetAnimation=function(){var t,e,n;return t=document.getElementById("clock-animation-left-semicircle"),n=document.getElementById("clock-animation-right-semicircle"),e=document.getElementById("clock-animation-right-mask"),t.removeAttribute("id"),n.removeAttribute("id"),e.removeAttribute("id"),setTimeout(function(){return t.setAttribute("id","clock-animation-left-semicircle"),n.setAttribute("id","clock-animation-right-semicircle"),e.setAttribute("id","clock-animation-right-mask")},10)},setAnimationTime=function(t){var e,n;return e=".animation { animation-duration: "+t+"s }",n=document.getElementById("style").sheet,n.insertRule(e,n.cssRules.length)};